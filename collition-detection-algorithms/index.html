<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>collision detection algorithms</title>
</head>
<body>
   
    <canvas id="gameCanvas" width="500" height="400"></canvas>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
    
        let player = { x: 225, y: 350, width: 50, height: 20, color: "blue" };
        let fallingBlocks = [];
        let score = 0;
        let gameOver = false;
        let isHolding = false;
        let touchOffsetX = 0;
    
        function createBlock() {
            let x = Math.random() * (canvas.width - 30);
            fallingBlocks.push({ x, y: 0, width: 30, height: 30, color: "red" });
        }
    
        function updateGame() {
            if (gameOver) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
    
            // Move and draw falling blocks
            for (let i = 0; i < fallingBlocks.length; i++) {
                let block = fallingBlocks[i];
                block.y += 4; // Falling speed
    
                // Check collision with player
                if (
                    block.y + block.height >= player.y &&
                    block.x + block.width >= player.x &&
                    block.x <= player.x + player.width
                ) {
                    score++;
                    fallingBlocks.splice(i, 1);
                    i--;
                }
                // Check if block reaches bottom
                else if (block.y > canvas.height) {
                    gameOver = true;
                }
                ctx.fillStyle = block.color;
                ctx.fillRect(block.x, block.y, block.width, block.height);
            }
    
            // Draw player
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
    
            // Display score
            ctx.fillStyle = "black";
            ctx.font = "20px Arial";
            ctx.fillText("Score: " + score, 10, 30);
    
            // Check for game over
            if (gameOver) {
                ctx.fillStyle = "red";
                ctx.font = "30px Arial";
                ctx.fillText("Game Over!", 170, 200);
            } else {
                requestAnimationFrame(updateGame);
            }
        }
    
        function isTouchingPlayer(x, y) {
            return x >= player.x && x <= player.x + player.width && y >= player.y && y <= player.y + player.height;
        }
    
        function handleTouchStart(event) {
            const touchX = event.touches[0].clientX - canvas.getBoundingClientRect().left;
            const touchY = event.touches[0].clientY - canvas.getBoundingClientRect().top;
    
            if (isTouchingPlayer(touchX, touchY)) {
                isHolding = true;
                touchOffsetX = touchX - player.x;
            }
        }
    
        function handleTouchMove(event) {
            if (!isHolding) return;
            event.preventDefault();
            const touchX = event.touches[0].clientX - canvas.getBoundingClientRect().left;
            player.x = touchX - touchOffsetX;
    
            // Prevent player from moving out of bounds
            if (player.x < 0) player.x = 0;
            if (player.x > canvas.width - player.width) player.x = canvas.width - player.width;
        }
    
        function handleTouchEnd() {
            isHolding = false;
        }
    
        function handleMouseDown(event) {
            const clickX = event.clientX - canvas.getBoundingClientRect().left;
            const clickY = event.clientY - canvas.getBoundingClientRect().top;
    
            if (isTouchingPlayer(clickX, clickY)) {
                isHolding = true;
                touchOffsetX = clickX - player.x;
            }
        }
    
        function handleMouseMove(event) {
            if (!isHolding) return;
            const moveX = event.clientX - canvas.getBoundingClientRect().left;
            player.x = moveX - touchOffsetX;
    
            // Prevent player from moving out of bounds
            if (player.x < 0) player.x = 0;
            if (player.x > canvas.width - player.width) player.x = canvas.width - player.width;
        }
    
        function handleMouseUp() {
            isHolding = false;
        }
    
        // Touch Events
        canvas.addEventListener("touchstart", handleTouchStart);
        canvas.addEventListener("touchmove", handleTouchMove);
        canvas.addEventListener("touchend", handleTouchEnd);
    
        // Mouse Events
        canvas.addEventListener("mousedown", handleMouseDown);
        canvas.addEventListener("mousemove", handleMouseMove);
        canvas.addEventListener("mouseup", handleMouseUp);
    
        setInterval(createBlock, 1000); // Spawn new block every second
        updateGame();
    </script>
    
    
    
</body>
</html>